name: Multiple Auto Commits Per Day

on:
  schedule:
    - cron: '30 16 * * *'  # 10:30 PM BDT (16:30 UTC)
    - cron: '40 16 * * *'  # 10:40 PM BDT (16:40 UTC)
    - cron: '50 16 * * *'  # 10:50 PM BDT (16:50 UTC)
    - cron: '0 17 * * *'   # 11:00 PM BDT (17:00 UTC)
    - cron: '10 17 * * *'  # 11:10 PM BDT (17:10 UTC)
    - cron: '0 3 * * *'    # 9:00 AM BDT
    - cron: '0 8 * * *'    # 2:00 PM BDT
    - cron: '0 12 * * *'   # 6:00 PM BDT
    - cron: '0 9 * * *'
    - cron: '15 9 * * *'
    - cron: '45 9 * * *'
    - cron: '0 10 * * *'
  workflow_dispatch:

jobs:
  commit:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          persist-credentials: true

      - name: Git Config
        run: |
          git config --global user.name "ak-ake"
          git config --global user.email "ake.akibislam@gmail.com"
          
      - name: Create Daily Entry
        run: |
          if [ ! -f commit_log.md ]; then
            touch commit_log.md
          fi
          echo "Multi-commit update: $(date +%Y-%m-%d) at $(date -u +%H:%M) UTC" >> commit_log.md

      - name: Commit and Push
        run: |
          git add commit_log.md
          if git diff --staged --quiet; then
            echo "No changes to commit"
            exit 0
          fi
          git commit -m "Auto-commit: Multi-run update at $(date -u +%H:%M) UTC"
          git push origin HEAD || echo "Push failed"
